<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canteen Menu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f7f7f7;
    }
    header, footer {
      background: #333;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .menu, .login {
      display: grid;
      justify-content: center;
      padding: 2rem;
    }
    .item, .login-form {
      background: white;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .item img {
      max-width: 100%;
      border-radius: 8px;
    }
    .cart {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: #333;
      color: white;
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to Canteen</h1>
    <p>Please log in with your mobile number to access the menu</p>
  </header>

  <!-- Login Form -->
  <section class="login" id="loginSection">
    <div class="login-form">
      <h3>Login with Mobile Number</h3>
      <input type="text" id="mobileNumber" placeholder="Enter your mobile number" maxlength="10" />
      <button onclick="sendOTP()">Send OTP</button>
    </div>

    <!-- OTP Verification Form (hidden by default) -->
    <div class="otp-form" id="otpSection" style="display:none;">
      <h3>Enter OTP</h3>
      <input type="text" id="otp" placeholder="Enter OTP" maxlength="6" />
      <button onclick="verifyOTP()">Verify OTP</button>
    </div>
  </section>

  <!-- Menu Section (hidden by default) -->
  <section class="menu" id="menuSection" style="display:none;">
    <div id="menu"></div>
    <div class="cart" onclick="viewCart()">ðŸ›’ View Cart (<span id="cart-count">0</span>)</div>
  </section>

  <footer>
    <p>&copy; 2025 Canteen Service</p>
  </footer>

  <script>
    const items = [
      { name: "Veg Sandwich", price: 30, img: "https://cdn.pixabay.com/photo/2017/03/17/10/45/sandwich-2150540_1280.jpg" },
      { name: "Aloo Paratha", price: 25, img: "https://cdn.pixabay.com/photo/2021/12/17/10/52/aloo-paratha-6874535_1280.jpg" },
      { name: "Paneer Roll", price: 40, img: "https://cdn.pixabay.com/photo/2020/08/02/06/20/kathi-roll-5459423_1280.jpg" },
      { name: "Cold Coffee", price: 60, img: "https://cdn.pixabay.com/photo/2017/06/30/18/33/coffee-2455693_1280.jpg" },
      { name: "Chole Bhature", price: 50, img: "https://cdn.pixabay.com/photo/2022/06/06/08/26/chole-bhature-7246034_1280.jpg" },
      { name: "Masala Dosa", price: 45, img: "https://cdn.pixabay.com/photo/2023/03/20/06/07/masala-dosa-7863162_1280.jpg" },
      { name: "Samosa", price: 15, img: "https://cdn.pixabay.com/photo/2020/10/19/17/55/samosa-5668374_1280.jpg" },
      { name: "Tea", price: 10, img: "https://cdn.pixabay.com/photo/2020/09/19/07/05/tea-5583123_1280.jpg" }
    ];

    const cart = [];

    const menuDiv = document.getElementById('menu');
    const cartCount = document.getElementById('cart-count');
    
    let generatedOTP = null;

    // Show Menu if User is Logged In
    function showMenu() {
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('menuSection').style.display = 'block';
      
      items.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}" />
          <h3>${item.name}</h3>
          <p>â‚¹${item.price}</p>
          <button onclick="addToCart(${index})">Add to Cart</button>
        `;
        menuDiv.appendChild(div);
      });
    }

    // Function to Send OTP (Simulated)
    function sendOTP() {
      const mobileNumber = document.getElementById('mobileNumber').value;

      // Simple validation: Check if the mobile number is 10 digits
      if (mobileNumber.length === 10) {
        // Generate a simple OTP (for demo purposes)
        generatedOTP = Math.floor(100000 + Math.random() * 900000);  // Random 6-digit number
        console.log('Generated OTP: ' + generatedOTP);  // For debugging, remove in production
        
        // Simulate sending OTP
        alert(`OTP has been sent to ${mobileNumber}. Please enter the OTP.`);
        
        // Show OTP input section
        document.getElementById('otpSection').style.display = 'block';
      } else {
        alert('Please enter a valid 10-digit mobile number');
      }
    }

    // Function to Verify OTP
    function verifyOTP() {
      const enteredOTP = document.getElementById('otp').value;
      
      if (enteredOTP == generatedOTP) {
        alert('OTP Verified Successfully!');
        localStorage.setItem('userMobile', document.getElementById('mobileNumber').value);
        showMenu();
      } else {
        alert('Invalid OTP. Please try again.');
      }
    }

    // Add Item to Cart
    function addToCart(index) {
      cart.push(items[index]);
      cartCount.textContent = cart.length;
      alert(`${items[index].name} added to cart!`);
    }

    // View Cart
    function viewCart() {
      let summary = cart.map(item => `- ${item.name}: â‚¹${item.price}`).join('\n');
      let total = cart.reduce((sum, item) => sum + item.price, 0);
      alert(`Your Order:\n${summary}\n\nTotal: â‚¹${total}`);
    }

  </script>
</body>
</html>

